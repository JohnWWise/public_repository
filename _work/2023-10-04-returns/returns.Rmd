---
title: "FDOC Reincarceration"
description: |
  This document is an ongoing investigation into the data available reincarcerations in Florida. I choose not to use the term "recidivism", as the term implies a focus on reoffending and the idea of a "criminal" identity, rather than acknowledging the complex social, economic, and systemic factors at play.
output:
  distill::distill_article:
    toc: true
    toc_float: true
    toc_depth: 2
    df_print: paged
---
The Florida Department of Corrections makes its OBIS database accessible for public download [here](https://fdc.myflorida.com/pub/obis_request.html).

This document is an ONGOING mining of that data. Keep an eye out for my newsletter (which doesnâ€™t exist yet) for updates, or press f5 to refresh.

<ul>
    <li>
      <details>
        <summary>Importing libraries, setting seed</summary>
        <p>
```{r libraries and seed, echo=TRUE}
# Packages utilized:
pkgs = c("readxl",
         "dplyr",
         "DT",
         "ggforce",
         "kableExtra")
inst = lapply(pkgs, library, character.only = TRUE)
set.seed(8675309)
```
  </p>
  </details>
  </li>
</ul>

Since my github respoitory is being finicky about large file sizes and the size of the fdoc file of all releases on record is quite large, we limit ourselves to the data on returns for those who are currently incarcerated. That is, we look at everyone who is currently incarcerated and retuned to prison within one year of thier most recent release.

<ul>
    <li>
      <details>
        <summary>Importing Data, Identifying Population for Analysis</summary>
        <p>
```{r}
base_dir <- "/Users/johnwise/Downloads"
Root <- read_excel(paste0(base_dir, "/Inmate_Active_2023-10.XLSX"))
Incarhist <- read_excel(paste0(base_dir, "/Inmate_Active_2023-10.XLSX"), sheet = 6)

first_timers <- Incarhist %>%
  arrange(DCNumber, desc(ReceiptDate)) %>%
  group_by(DCNumber) %>%
  mutate(row_num = row_number()) %>%
  filter(row_num <= 2) %>%
  select(-row_num) %>%
  count(DCNumber) %>%
  filter(n==1)
```
Remove first-timers from analysis, filter for those out less than 1 year on most recent release
```{r}
returners <- anti_join(Incarhist, first_timers, by ='DCNumber')
# grab the two most recent receipts of those who have returned
returners_current_and_last <- returners %>%
  arrange(DCNumber, desc(ReceiptDate)) %>%
  group_by(DCNumber) %>%
  mutate(row_num = row_number()) %>%
  filter(row_num <= 2) %>%
  select(-row_num)
```
Discovering the amount of time each person was free last time they were out
```{r}
returners_time_free <- returners_current_and_last %>%
  group_by(DCNumber) %>%
  summarise(TimeOut = as.numeric(difftime(max(ReceiptDate, na.rm = TRUE), max(ReleaseDate, na.rm = TRUE), units = "days"))) %>% # Note, there were 7 entires for which a negative time free was calculated. Investigation shows
  filter(TimeOut >= 0) # that this is due to these individuals having missing most ReceiptDate for most recent conviction.
# We omit these 7 observations for the purpose of this analysis
```
Isolating those out less than one year on most recent release
```{r}
short_out <- returners_time_free %>%
  filter(TimeOut <= 365)
```
Going back to fetch general information on those identified
```{r}
current_incarcerated_returned_less_1year <- merge(Root, short_out, by = 'DCNumber')
```
Removing DCNumbers and names before public display
```{r}
public <- current_incarcerated_returned_less_1year %>% select(-DCNumber, -FirstName, -LastName, -MiddleName, -BirthDate, -NameSuffix)
```

  </p>
  </details>
  </li>
</ul>


# Inital Look

## Time Free Since Last Release

To begin, we should examine the amount of time that those who are currently incarcerated in Florida were free since their last incarceration:

```{r fig.align='center', fig.height=8, fig.width=8, code_folding = TRUE}
ggplot(returners_time_free, aes(x = 1, y = TimeOut/365.25)) +
  geom_sina(alpha = 0.5, position = 'dodge') +
  ylab("Years Free") +
  scale_y_continuous(breaks = seq(0, max(returners_time_free$TimeOut), by = 1),
                     labels = function(x) ifelse(x %% 1 == 0, as.integer(x), ""),
                     limits = c(0, max(returners_time_free$TimeOut/365.25))) +
  theme(axis.text.x = element_blank()) +
  geom_boxplot(data = returners_time_free, aes(x = 1, y = TimeOut/365.25), 
               size = .75, outlier.shape = NA, color = 'hotpink', alpha = 0.1) +
  theme_minimal() +
  theme(panel.grid.major.x = element_blank()) +
  labs(title = "Density of Years Free Before Returning to Prison")
```

Wherein we see that the vast majority of those who are currently incarcerated and had done time in Florida previously were not free for very long before their current commitment. 

```{r code_folding = TRUE}
quartiles <- round(quantile(returners_time_free$TimeOut, probs = c(0.25, 0.5, 0.75))/365.25, 1)

quartile_table <- data.frame(
  "Quartile" = c("Q1", "Median (Q2)", "Q3"),
  Years_Free = quartiles
)

kable(quartile_table) %>% 
  kable_styling(latex_options = "hold_position")

```


We frequently encounter statistics that state "X amount of prisoners will return within 5 years." However, a more appropriate way to present this information is to focus on the current incarcerated population in Florida who have served time before. Shockingly, a quarter of them were returned to prison in less than 1.8 years after their most recent release, while half of them were not out longer than 3.2 years. Moreover, only 25% of them managed to stay out of prison for more than 5.7 years.

This subtle change in framing emphasizes the inefficiency of traditional carceral structures in preventing recidivism, while also highlighting the responsibility of the correctional agency. If the purpose of a sentence is to 'correct,' why do we frequently find the need to re-correct so soon?


## County of most Recent Commitment


## Charges


# Returns Less than 1 Year
I have identified 4253 individuals (primary identification information of individuals removed by me for public display in this public display only) who are currently incarcerated and who had previously been incarcerated and were out for less than one year since their release from that previous incarceration.

```{r code_folding = TRUE}
datatable(public, options = list(scrollX = TRUE, pageLength = 10, lengthMenu = c(10, 20, 50)))
```
